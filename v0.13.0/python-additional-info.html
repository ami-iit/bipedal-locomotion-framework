<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>üêç Python bindings | bipedal locomotion framework v0.13.0</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <span id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">
        <a href="../index.html">bipedal locomotion framework</a> <span class="m-breadcrumb">|</span> <a href="index.html" class="m-thin">v0.13.0</a>
      </span>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="4">
            <li>
              <a href="pages.html">Versions</a>
              <ol>
                <li><a href="../index.html">Master</a></li>
                <li><a href="../v0.14.1/index.html">v0.14.1</a></li>
                <li><a href="../v0.15.0/index.html">v0.15.0</a></li>
                <li><a href="../v0.13.0/index.html">v0.13.0</a></li>
              </ol>
            </li>
            <li>
              <a href="pages.html">Contacts</a>
              <ol>
                <li><a href="https://github.com/ami-iit/bipedal-locomotion-framework">GitHub</a></li>
                <li><a href="https://www.iit.it/web/ami/">Lab website</a></li>
              </ol>
            </li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          üêç Python bindings
        </h1>
<p><a name="md__home_runner_work_bipedal_locomotion_framework_bipedal_locomotion_framework_docs_bipedal_locomotion_framework_docs_pages_python_additional_info"></a></p><section id="autotoc_md0"><h2><a href="#autotoc_md0">Introduction</a></h2><p><strong>bipedal-locomotion-framework</strong> provides also python bindings. You can easily use them by importing <code>bipedal-locomotion-framework</code> in a python interpreter as follows</p><pre class="m-code"><span class="kn">import</span> <span class="nn">bipedal_locomotion_framework.bindings</span> <span class="k">as</span> <span class="nn">blf</span></pre><p>Once you have import it you can check the content of the bindings using <code>help(blf)</code>. We tried to implement a 1-to-1 mapping between the c++ structure and the python one, this means that every python submodule is associated to the equivalent c++ submodule. For instance <code>blf.tsid</code> represents the python bindings of <code>BipedalLocomotion::TSID</code> component.</p><p>The python bindings has been designed to be compliant to the <a href="https://www.python.org/dev/peps/pep-0008/">PEP-8</a>. This means that:</p><ol><li><strong>function</strong> and the <strong>variables</strong> are lowercase words separated by underscore (<code>snake_case</code>)</li><li>The <strong>class</strong> names starts with a capital letter (<code>CammelCase</code>)</li><li>The <strong>modules</strong> are lowercase words separated by underscore (<code>snake_case</code>)</li></ol><p>To give an example, the following code shows how to retrieve a parameter from a <code>toml</code> configuration file in c++ and in python</p><pre class="m-code"><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;BipedalLocomotion/ParametersHandler/TomlImplementation.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;memory&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">namespace</span><span class="w"> </span><span class="nn">blf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">::</span><span class="nn">BipedalLocomotion</span><span class="p">;</span>

<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">parameterFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;./config.toml&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">param</span><span class="p">;</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">paramHandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">blf</span><span class="o">::</span><span class="n">ParametersHandler</span><span class="o">::</span><span class="n">TomlImplementation</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="n">paramHandler</span><span class="o">-&gt;</span><span class="n">setFromFile</span><span class="p">(</span><span class="n">parameterFile</span><span class="p">);</span>
<span class="w">    </span><span class="n">paramHandler</span><span class="o">-&gt;</span><span class="n">getParameter</span><span class="p">(</span><span class="s">&quot;vector&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">param</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<span class="p">}</span></pre><pre class="m-code"><span class="kn">import</span> <span class="nn">bipedal_locomotion_framework.bindings</span> <span class="k">as</span> <span class="nn">blf</span>


<span class="n">parameter_file</span> <span class="o">=</span> <span class="s1">&#39;./config.toml&#39;</span>
<span class="n">param_handler</span> <span class="o">=</span> <span class="n">blf</span><span class="o">.</span><span class="n">parameters_handler</span><span class="o">.</span><span class="n">TomlParametersHandler</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">param_handler</span><span class="o">.</span><span class="n">set_from_file</span><span class="p">(</span><span class="n">parameter_file</span><span class="p">)</span>

<span class="n">vector</span> <span class="o">=</span> <span class="n">param_handler</span><span class="o">.</span><span class="n">get_vector_of_int</span><span class="p">(</span><span class="s1">&#39;vector&#39;</span><span class="p">)</span></pre><pre class="m-code"><span class="c1"># config.toml file</span>

<span class="na">vector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[1, 2, 3, 4, 5]</span></pre></section><section id="autotoc_md1"><h2><a href="#autotoc_md1">Some utilities</a></h2><section id="autotoc_md2"><h3><a href="#autotoc_md2">Create a custom TSID or IK task directly in Python</a></h3><p>If you are a <code>python</code> user and you want create a inverse kinematics (IK) or a task based inverse dynamics (TSID) tasks, you do not need to write a <code>C++</code> code. Indeed it is possible to write a class that inherits from <code>TSIDLinearTask</code> or <code>IKLinearTask</code> and pass it to <code>tsid</code> or <code>ik</code> solvers. The following snippet can be used as starting point to build a custom TSID task, a similar approach can be used to define a custom IK task</p><pre class="m-code"><span class="kn">import</span> <span class="nn">bipedal_locomotion_framework.bindings</span> <span class="k">as</span> <span class="nn">blf</span>


<span class="k">class</span> <span class="nc">CustomTSIDTask</span><span class="p">(</span><span class="n">blf</span><span class="o">.</span><span class="n">tsid</span><span class="o">.</span><span class="n">TSIDLinearTask</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; CustomTSIDTask represents a custom task for the tsid solver.</span>

<span class="sd">    The class must define the following functions:</span>
<span class="sd">    __init__(self): the constructor</span>
<span class="sd">    size(self) -&gt; Get the size of the task. (I.e the number of rows of the vector b)</span>
<span class="sd">    is_valid(self) -&gt; Determines the validity of the objects retrieved with getA() and getB()</span>
<span class="sd">    type(self) -&gt; Get the type of the task. Namely equality or inequality</span>

<span class="sd">    Furthemore you have to populate the following attrubutes defined in TSIDLinearTask:</span>
<span class="sd">    self._description:str -&gt; contains the description of the task</span>
<span class="sd">    self._A:numpy.ndarray[float64[m, n]]) -&gt; matrix that describes the task A * x = b</span>
<span class="sd">    self._b: numpy.ndarray[float64[m, 1]]) -&gt; vector that describes the task A * x = b</span>

<span class="sd">    Depending on the content of the task you may need to reimplement the following methods</span>
<span class="sd">    initialize(self, param_handler: blf.parameters_handler.IParameterHandler) -&gt; usefull function to set parameters to the task</span>
<span class="sd">    set_variables_handler(self, variables_handler: blf.system.VariablesHandler) -&gt; usefull function to set the variables</span>
<span class="sd">    update(self) -&gt; update the content of the task</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">blf</span><span class="o">.</span><span class="n">tsid</span><span class="o">.</span><span class="n">TSIDLinearTask</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># Without this, a TypeError is raised.</span>

        <span class="c1"># set the description of the task</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="o">=</span> <span class="s2">&quot;Custom task&quot;</span>

    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># this is the number of rows of the vector b (in this example is equal to 1)</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># the types are defined in blf.tsid.TSIDLinearTask.Type</span>
        <span class="k">return</span> <span class="n">blf</span><span class="o">.</span><span class="n">tsid</span><span class="o">.</span><span class="n">TSIDLinearTask</span><span class="o">.</span><span class="n">Type</span><span class="o">.</span><span class="n">equality</span></pre><p>Then you can use your custom task as follows</p><pre class="m-code"><span class="kn">import</span> <span class="nn">bipedal_locomotion_framework.bindings</span> <span class="k">as</span> <span class="nn">blf</span>

<span class="c1"># Instantiate the task</span>
<span class="n">custom_task</span> <span class="o">=</span> <span class="n">CustomTSIDTask</span><span class="p">()</span>

<span class="c1"># Initialize your task</span>
<span class="n">custom_task</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">param_handler</span><span class="p">)</span>

<span class="c1"># Create the solver</span>
<span class="n">solver</span> <span class="o">=</span> <span class="n">blf</span><span class="o">.</span><span class="n">tsid</span><span class="o">.</span><span class="n">QPTSID</span><span class="p">()</span>
<span class="n">priority</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">solver</span><span class="o">.</span><span class="n">add_task</span><span class="p">(</span><span class="n">custom_task</span><span class="p">,</span> <span class="s1">&#39;custom_task&#39;</span><span class="p">,</span> <span class="n">priority</span><span class="p">)</span></pre></section><section id="autotoc_md3"><h3><a href="#autotoc_md3">Automatically build a TSID or IK from configuration file</a></h3><p>If you are a <code>python</code> user you can easily create a inverse kinematics (IK) or a task based inverse dynamics (TSID) problem writing just a configuration file. The configuration file should contains the name of the tasks and the parameters of the associated tasks. This is possible thanks to two utilities function available only in python (<code>create_ik</code> and <code>create_tsid</code>)</p><p>For instance you can create a IK problem with</p><pre class="m-code"><span class="kn">import</span> <span class="nn">bipedal_locomotion_framework.bindings</span> <span class="k">as</span> <span class="nn">blf</span>
<span class="kn">import</span> <span class="nn">bipedal_locomotion_framework.utils</span> <span class="k">as</span> <span class="nn">utils</span>

<span class="c1"># create a param handler</span>
<span class="n">kindyn_handler</span> <span class="o">=</span> <span class="n">blf</span><span class="o">.</span><span class="n">parameters_handler</span><span class="o">.</span><span class="n">TomlParametersHandler</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">kindyn_handler</span><span class="o">.</span><span class="n">set_from_file</span><span class="p">(</span><span class="s2">&quot;parameter_file.toml&quot;</span><span class="p">)</span>
<span class="n">ik_handler</span> <span class="o">=</span> <span class="n">blf</span><span class="o">.</span><span class="n">parameters_handler</span><span class="o">.</span><span class="n">TomlParametersHandler</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">ik_handler</span><span class="o">.</span><span class="n">set_from_file</span><span class="p">(</span><span class="s2">&quot;parameter_file_ik.toml&quot;</span><span class="p">)</span>

<span class="n">kindyn_descriptor</span> <span class="o">=</span> <span class="n">blf</span><span class="o">.</span><span class="n">floating_base_estimators</span><span class="o">.</span><span class="n">construct_kindyncomputations_descriptor</span><span class="p">(</span><span class="n">kindyn_handler</span><span class="p">)</span>

<span class="n">solver</span><span class="p">,</span> <span class="n">tasks</span><span class="p">,</span> <span class="n">variables_handler</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">create_ik</span><span class="p">(</span><span class="n">kindyn</span><span class="o">=</span><span class="n">kindyn_descriptor</span><span class="p">,</span> <span class="n">param_handler</span><span class="o">=</span><span class="n">ik_handler</span><span class="p">)</span></pre><p>An example of the configuration file is</p><pre class="m-code"><span class="na">tasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[&quot;COM_TASK&quot;, &quot;LF_TASK&quot;]</span>

<span class="k">[IK]</span>
<span class="na">robot_velocity_variable_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;robot_velocity&quot;</span>

<span class="k">[VARIABLES]</span>
<span class="na">variables_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[&quot;robot_velocity&quot;]</span>
<span class="na">variables_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[29]</span>

<span class="k">[COM_TASK]</span>
<span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;com&quot;</span>
<span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;CoMTask&quot;</span>
<span class="na">priority</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
<span class="na">weight</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">[10.0, 10.0, 10.0]</span>

<span class="c1"># The following parameters are required by the specific task</span>
<span class="na">robot_velocity_variable_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;robot_velocity&quot;</span>
<span class="na">kp_linear</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10.0</span>

<span class="k">[LF_TASK]</span>
<span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;left_foot&quot;</span>
<span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;SE3Task&quot;</span>
<span class="na">priority</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0</span>

<span class="c1"># The following parameters are required by the specific task</span>
<span class="na">robot_velocity_variable_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;robot_velocity&quot;</span>
<span class="na">frame_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;left_sole_link&quot;</span>
<span class="na">kp_linear</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10.0</span>
<span class="na">kp_angular</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10.0</span></pre><p>You can find further details calling</p><pre class="m-code"><span class="kn">import</span> <span class="nn">bipedal_locomotion_framework.utils</span> <span class="k">as</span> <span class="nn">utils</span>


<span class="n">help</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">create_tsid</span><span class="p">)</span>
<span class="n">help</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">create_ik</span><span class="p">)</span></pre></section></section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">‚åò</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">‚åò</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script src="searchdata-v2.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>bipedal-locomotion-framework documentation. Licensed under the <a href="https://www.gnu.org/licenses/lgpl-3.0.en.html">GNU Lesser General Public License v3.0</a>. Project maintained by the <a href="https://www.iit.it/web/ami/">Artificial and Mechanical Intelligence Lab</a>. Contact the team via <a href="https://github.com/ami-iit/bipedal-locomotion-framework/issues/new">GitHub</a>.<br />Generated by <a href="https://doxygen.org/">Doxygen</a> 1.9.1 and <a href="https://mcss.mosra.cz/">m.css</a>.
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
