<!-- Copyright (C) 2019-2025 Istituto Italiano di Tecnologia (IIT). All rights reserved.
This software may be modified and distributed under the terms of the
BSD-3-Clause license. -->

<?xml version="1.0" encoding="UTF-8" ?>
<device  xmlns:xi="http://www.w3.org/2001/XInclude" name="yarp-robot-logger" type="YarpRobotLoggerDevice">
  <param name="robot">ergocub</param>
  <param name="sampling_period_in_s">0.001</param>

  <param name="rgb_cameras_fps">(20)</param>
  <param name="rgb_cameras_rgb_save_mode">("video")</param>

  <!-- <param name="rgb_cameras_fps">()</param>
  <param name="rgb_cameras_rgb_save_mode">()</param> -->

  <param name="rgbd_cameras_fps">()</param>
  <param name="rgbd_cameras_depth_scale">()</param>
  <param name="rgbd_cameras_depth_save_mode">()</param>
  <param name="rgbd_cameras_rgb_save_mode">()</param>

  <param name="video_codec_code">mp4v</param>
  <param name="port_prefix">/yarp-robot-logger</param>
  <param name="log_text">true</param>
  <param name="text_logging_subnames">("ergocub-torso/yarprobotinterface")</param>
  <!-- <param name="code_status_cmd_prefixes">("ssh ergocub@10.0.2.2" "ssh ergocub@10.0.2.3")</param> -->

  <param name="enable_real_time_logging" extern-name="enable_real_time_logging">false</param>
  <group name="REAL_TIME_STREAMING">
    <param name="remote">"/yarp-robot-logger/rt_logging"</param>
  </group>

  <group name="Telemetry">
    <param name="save_periodically">true</param>
    <param name="save_period">1800.0</param>
  </group>

  <group name="ExogenousSignals">
    <param name="vectors_collection_exogenous_inputs">("Walking", "amp", "current_commands", "balancing", "force_platforms", TorqueControlTracking, joint_control)</param>
    <param name="vectors_exogenous_inputs">()</param>
    <param name="string_exogenous_inputs">()</param>
    <param name="image_exogenous_inputs">()</param>
    <param name="human_state_exogenous_inputs">()</param>
    <param name="wearable_targets_exogenous_inputs">()</param>
    <param name="wearable_data_exogenous_inputs">()</param>

    <group name="Walking">
      <param name="local">"/yarp-robot-logger/exogenous_signals/walking"</param>
      <param name="remote">"/walking-coordinator/logger"</param>
      <param name="signal_name">"walking"</param>
      <param name="carrier">"udp"</param>
    </group>

    <group name="joint_control">
      <param name="local">"/yarp-robot-logger/exogenous_signals/joint_control"</param>
      <param name="remote">"/joint_motion/logger"</param>
      <param name="signal_name">"joint_control"</param>
      <param name="carrier">"udp"</param>
    </group>

    <group name="force_platforms">
      <param name="local">"/yarp-robot-logger/exogenous_signals/force_platforms"</param>
      <param name="remote">"/stream-forceplate-yarp/log"</param>
      <param name="signal_name">"force_platforms"</param>
      <param name="carrier">"udp"</param>
    </group>


    <group name="current_commands">
      <param name="local">"/yarp-robot-logger/exogenous_signals/current_commands"</param>
      <param name="remote">"/joint_motion/logger"</param>
      <param name="signal_name">"current_commands"</param>
      <param name="carrier">"udp"</param>
    </group>


    <group name="amp">
      <param name="local">"/yarp-robot-logger/exogenous_signals/amp_walking"</param>
      <param name="remote">"/amp_walking/logger"</param>
      <param name="signal_name">"amp"</param>
      <param name="carrier">"udp"</param>
    </group>

    <group name="balancing">
      <param name="local">"/yarp-robot-logger/exogenous_signals/balancing"</param>
      <param name="remote">"/balancing_position_controller/logger"</param>
      <param name="signal_name">"balancing"</param>
      <param name="carrier">"udp"</param>
    </group>

     <group name="TorqueControlTracking">
      <param name="local">"/yarp-robot-logger/exogenous_signals/torque_control_trajectory"</param>
      <param name="remote">"/joint_torque_tracking/logger"</param>
      <param name="signal_name">"torque_control_tracking"</param>
      <param name="carrier">"udp"</param>
    </group>

  </group>

  <group name="RobotCameraBridge">
      <param name="stream_cameras">true</param>
      <group name="Cameras">
        <param name="rgb_cameras_list">("logitech")</param>
        <!-- <param name="rgb_cameras_list">()</param> -->
        <param name="rgbd_cameras_list">()</param>
      </group>
  </group>

  <group name="RobotSensorBridge">
    <param name="check_for_nan">false</param>
    <param name="stream_joint_states">true</param>
    <param name="stream_motor_states">true</param>
    <param name="stream_inertials">true</param>
    <param name="stream_cartesian_wrenches">false</param>
    <param name="stream_forcetorque_sensors">true</param>
    <param name="stream_pids">false</param>
    <param name="stream_motor_PWM">true</param>
    <param name="stream_temperatures">false</param>
    <param name="stream_joint_accelerations">true</param>
    <param name="stream_motor_temperature">false</param>

    <group name="RemoteControlBoardRemapper">
      <param name="joints_list">("neck_pitch", "neck_roll", "neck_yaw", "camera_tilt", "torso_pitch", "torso_roll", "torso_yaw", "l_shoulder_pitch", "l_shoulder_roll", "l_shoulder_yaw", "l_elbow", "l_wrist_roll", "l_wrist_pitch",  "l_wrist_yaw", "l_thumb_add", "l_thumb_oc", "l_index_oc", "l_middle_oc", "l_ring_pinky_oc", "r_shoulder_pitch", "r_shoulder_roll", "r_shoulder_yaw", "r_elbow", "r_wrist_roll", "r_wrist_pitch",  "r_wrist_yaw", "r_thumb_add", "r_thumb_oc", "r_index_oc", "r_middle_oc", "r_ring_pinky_oc", "l_hip_pitch", "l_hip_roll", "l_hip_yaw", "l_knee", "l_ankle_pitch", "l_ankle_roll", "r_hip_pitch", "r_hip_roll", "r_hip_yaw", "r_knee", "r_ankle_pitch", "r_ankle_roll")</param>
    </group>

    <group name="SixAxisForceTorqueSensors">
      <param name="sixaxis_forcetorque_sensors_list">(l_arm_ft, r_arm_ft, l_leg_ft)</param>
    </group>

    <group name="TemperatureSensors">
      <param name="temperature_sensors_list">(l_arm_ft, r_arm_ft, l_leg_ft)</param>
    </group>

    <group name="CartesianWrenches">
      <param name="cartesian_wrenches_list">("left_front_wrench_client", "left_rear_wrench_client", "right_front_wrench_client", "right_rear_wrench_client", "left_arm_wrench_client", "right_arm_wrench_client")</param>
    </group>

    <group name="InertialSensors">
      <param name="accelerometers_list">(waist_imu_0, l_arm_ft_imu, r_arm_ft_imu, l_leg_ft_imu)</param>
      <param name="gyroscopes_list">(waist_imu_0, l_arm_ft_imu, r_arm_ft_imu, l_leg_ft_imu)</param>
      <param name="magnetometers_list">(waist_imu_0, l_arm_ft_imu, r_arm_ft_imu, l_leg_ft_imu)</param>
      <param name="orientation_sensors_list">(waist_imu_0, l_arm_ft_imu, r_arm_ft_imu, l_leg_ft_imu)</param>
    </group>

  </group>

  <!-- ATTACH -->
  <action phase="startup" level="15" type="attach">
    <paramlist name="networks">
      <elem name="all_joints">all_joints_mc</elem>
      <!-- <elem name="left_front_wrench_client">left_front_wrench_client</elem>
      <elem name="left_rear_wrench_client">left_rear_wrench_client</elem>
      <elem name="right_front_wrench_client">right_front_wrench_client</elem>
      <elem name="right_rear_wrench_client">right_rear_wrench_client</elem> -->
      <!-- <elem name="right_arm_wrench_client">right_arm_wrench_client</elem>
      <elem name="left_arm_wrench_client">left_arm_wrench_client</elem> -->
      <elem name="mas-remapper">mas-remapper</elem>
      <!-- <elem name="jabra">jabra</elem> -->
      <elem name="logitech">logitech</elem>
    </paramlist>
  </action>

  <action phase="shutdown" level="2" type="detach" />
  <!-- FINISH ATTACH-->

</device>
